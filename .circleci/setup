#!/bin/bash

set -e

uname -a

export PATH="$PATH:/home/build/flutter/bin:/home/build/.pub-cache/bin:/usr/local/dart-sdk/bin"

git clone --depth 1 --branch 3.24.3 https://github.com/flutter/flutter

if [ -d dart-sdk ]
then
  echo Moving Dart SDK
  mkdir -p flutter/bin/cache
  mv dart-sdk flutter/bin/cache
fi

flutter doctor -v

flutter pub global activate flutterpi_tool

mkdir /tmp/artifacts;

git clone --depth 1 https://github.com/philseeley/boatinstrument.git

git clone --depth 1 --recursive https://github.com/philseeley/flutter-pi.git
